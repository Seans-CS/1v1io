<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1v1.io</title>
    <link rel="stylesheet" href="styles/LobbyStyles.css">
</head>

<body>
    <div class="background-container">
        <div class="Header">
            <div class="header-content">
                <p>1v1.io</p>
                <br>
                <button onclick="navigate('/home')" id="home">Home</button>
            </div>
        </div>
    </div>

    <div class="sidebar">
        <div class="lobby-code">
            <!-- Replace lobby code text with a button -->
            <button onclick="createLobby()">Create Code</button>
        </div>
        
        <div class="user-card">
            <div class="user-avatar"></div>
            <div class="user-details">
                <div class="user-name">User 1</div>
            </div>
        </div>
        <div class="user-card">
            <div class="user-avatar"></div>
            <div class="user-details">
                <div class="user-name">User 2</div>
            </div>
        </div>
        
        <div class="settings-area">
            <div class="settings-box">Settings</div>
        </div>
    </div>
    
    <div class="content-area">
    </div>

    <script src="/scripts/public.js"></script>
    <script>

        // Function to generate a random alphanumeric string of a specified length
function generateRandomCode(length) {
    let result = '';
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
    const charactersLength = characters.length;
    for (let i = 0; i < length; i++) {
        result += characters.charAt(Math.floor(Math.random() * charactersLength));
    }
    return result;
}

// Generate a unique 6-digit alphanumeric lobby code
const lobbyCode = generateRandomCode(6);

        
        // Function to create lobby code
        function createLobby() {
            // Make POST request to create a lobby
            fetch('/api/lobbies/create', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    lobbyName: 'Your Lobby Name', // Provide a name for the lobby
                    gameType: 'Your Game Type',   // Provide the type of game
                    isPrivate: true // Set to true if it's a private lobby, false otherwise
                })
            })
            .then(response => response.json())
            .then(data => {
                // Redirect to the lobby page with the generated lobby code
                window.location.href = '/lobby?lobbyCode=' + data.lobbyCode;
            })
            .catch(error => {
                console.error('Error creating lobby:', error);
                // Handle error
            });
        }
        

    </script>    
</body>
</html>
